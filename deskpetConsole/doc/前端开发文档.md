# 前端开发文档

## 目标与范围
- 提供桌宠控制台前端，用于设备管理、状态监控、指令下发与遥测展示。
- 优先满足 V0.1：可用、可观测、可操作；后续逐步扩展到高级交互与自动化。

## 技术选型（建议，可调整）
- 框架：Vue 3 + Vite + TypeScript
- 状态管理：Pinia
- 路由：Vue Router
- UI 组件库：Element Plus
- HTTP 客户端：Axios
- 实时通信：WebSocket（或 SSE，视后端支持而定）
- 图表：ECharts
- 代码质量：ESLint + Prettier
- 测试：Vitest（单测）+ Playwright（E2E）

## 开发环境
- Node.js：LTS 版本（建议 20.x 或 22.x）
- 包管理器：npm（当前初始化使用，可改为 pnpm/yarn）
- IDE：IntelliJ IDEA / VS Code

## 启动与构建（初始化项目后生效）
```bash
npm install
npm run dev
npm run build
npm run lint
npm run test
```
说明：`lint` 与 `test` 需完成 ESLint/Vitest 接入后再启用。

## 环境配置
- `.env`（示例）
```env
VITE_APP_TITLE=DeskPet Console
VITE_API_BASE=http://localhost:8080
VITE_WS_BASE=ws://localhost:8080/ws
```

## 目录结构（建议）
```
src/
  api/               # 接口封装
  assets/            # 静态资源
  components/        # 业务组件
  pages/             # 页面
  router/            # 路由
  stores/            # Pinia
  styles/            # 全局样式与主题
  types/             # 类型定义
  utils/             # 工具方法
```

## 页面与功能规划（V0.1）
- 设备列表：搜索、在线状态、最后活跃时间
- 设备详情：基础信息、在线状态、最近遥测
- 指令下发：选择设备、指令模板、参数校验、结果回执
- 遥测面板：最新值 + 历史趋势（图表）
- 日志与告警：操作日志、错误提示
- 系统设置：API 地址、刷新频率、主题切换

## 接口约定（待后端确认）
- REST：设备列表、设备详情、指令下发、历史遥测
- WebSocket/SSE：实时遥测与在线状态
- 统一错误格式：`code`、`message`、`traceId`

## 状态与缓存策略
- 设备列表与详情：短缓存（30-60s）+ 手动刷新
- 遥测最新值：实时通道为主，接口兜底
- 指令回执：短期缓存 + 可重试

## 安全与权限
- Token 认证（如后端启用）
- Token 存储：优先内存或短期存储，避免长期暴露

## 质量与测试
- 核心组件与工具方法单测
- 关键业务流程 E2E：登录（如有）、指令下发、遥测更新

## 发布与部署
- 产物：`dist/` 静态资源
- 部署：Nginx / 反向代理 / 静态托管
- 与后端协作：统一 API Base 与 WebSocket 地址

## 待确认事项
- 是否需要登录与权限控制
- 后端实时通道类型（WebSocket/SSE）
- UI 组件库偏好
- 终端部署方式（独立 Web / 嵌入管理端）
