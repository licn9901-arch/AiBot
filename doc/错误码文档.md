# 错误码文档

## 1. 错误响应格式

对外 REST API 统一返回 `ErrorResponse`：

```json
{
  "code": "A0400",
  "message": "Invalid request",
  "details": {
    "field": "deviceId"
  }
}
```

- `code`：错误码，遵循阿里 Java 开发手册的 A/B/C + 4 位数字规范
- `message`：错误提示（英文），为空时使用默认消息
- `details`：可选，附加上下文信息

## 2. 编码规范（阿里 Java 开发手册）

- `A`：用户（客户端）错误
- `B`：系统执行出错
- `C`：调用第三方服务出错

## 3. 错误码列表（pet-core）

| 错误码 | 枚举 | HTTP 状态 | 默认消息 | 说明 |
| --- | --- | --- | --- | --- |
| A0301 | INTERNAL_TOKEN_INVALID | 401 | Invalid internal token | 内部接口鉴权失败 |
| A0400 | INVALID_REQUEST | 400 | Invalid request | 请求格式或参数非法 |
| A0401 | VALIDATION_FAILED | 400 | Validation failed | 参数校验失败 |
| A0404 | DEVICE_NOT_FOUND | 404 | Device not found | 设备不存在 |
| A0405 | COMMAND_NOT_FOUND | 404 | Command not found | 指令不存在 |
| A0409 | DEVICE_ALREADY_EXISTS | 409 | Device already exists | 设备已存在 |
| B0001 | INTERNAL_ERROR | 500 | Internal server error | 系统内部异常 |
| C0001 | GATEWAY_UNAVAILABLE | 503 | Gateway unavailable | 网关不可用或调用失败 |
